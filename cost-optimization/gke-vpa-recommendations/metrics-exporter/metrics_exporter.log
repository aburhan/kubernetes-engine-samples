2024-12-18 02:35:18,298 [DEBUG] [__init__] Using selector: EpollSelector
2024-12-18 02:35:18,298 [INFO] [main] Processing metrics for date range: 2024-12-04 00:00:00 to 2024-12-17 00:00:00
2024-12-18 02:35:18,299 [INFO] [main] Found 1 namespaces to process
2024-12-18 02:35:18,299 [INFO] [process_namespace] [Namespace: default] Starting processing
2024-12-18 02:35:19,300 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.65 MB
2024-12-18 02:35:19,300 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 1: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:19,300 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 1: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:19,300 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 1: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:19,300 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 1: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:19,301 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 1: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:19,301 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 1: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:19,301 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 1: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:19,301 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 1: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:24,306 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 2: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:24,307 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 2: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:24,307 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 2: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:24,307 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 2: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:24,307 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 2: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:24,307 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 2: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:24,307 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 2: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:24,308 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 2: _fetch_timeseries_data() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:35:31,043 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.65 MB
2024-12-18 02:35:31,043 [INFO] [process_namespace] [Namespace: default] Finished processing
2024-12-18 02:37:30,762 [DEBUG] [__init__] Using selector: EpollSelector
2024-12-18 02:37:30,763 [INFO] [main] Processing metrics for date range: 2024-12-04 00:00:00 to 2024-12-17 00:00:00
2024-12-18 02:37:30,763 [INFO] [main] Found 1 namespaces to process
2024-12-18 02:37:30,763 [INFO] [process_namespace] [Namespace: default] Starting processing
2024-12-18 02:37:31,764 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.70 MB
2024-12-18 02:37:31,764 [ERROR] [process_namespace] [Namespace: default] Unexpected error: fetch_metric_with_retries() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
Traceback (most recent call last):
  File "/home/admin_/kubernetes-engine-samples/cost-optimization/gke-vpa-recommendations/metrics-exporter/main.py", line 84, in process_namespace
    fetch_metric_with_retries(namespace, metric_name, metric_config)
TypeError: fetch_metric_with_retries() missing 2 required positional arguments: 'start_datetime' and 'end_datetime'
2024-12-18 02:37:32,766 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.70 MB
2024-12-18 02:37:32,766 [INFO] [process_namespace] [Namespace: default] Finished processing
2024-12-18 02:37:32,767 [INFO] [main] Processing completed: 0 successful, 1 failed.
2024-12-18 02:37:32,767 [WARNING] [main] Failed namespaces: ['default']
2024-12-18 02:37:33,768 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.70 MB
2024-12-18 02:37:33,768 [INFO] [<module>] Finished processing in 3.01 seconds
2024-12-18 02:39:05,107 [DEBUG] [__init__] Using selector: EpollSelector
2024-12-18 02:39:05,108 [INFO] [main] Processing metrics for date range: 2024-12-04 00:00:00 to 2024-12-17 00:00:00
2024-12-18 02:39:05,108 [INFO] [main] Found 1 namespaces to process
2024-12-18 02:39:05,109 [INFO] [process_namespace] [Namespace: default] Starting processing
2024-12-18 02:39:06,109 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.71 MB
2024-12-18 02:39:06,110 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 1: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:06,110 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 1: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:06,110 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 1: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:06,110 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 1: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:06,110 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 1: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:06,110 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 1: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:06,111 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 1: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:06,111 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 1: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:11,116 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 2: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:11,116 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 2: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:11,117 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 2: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:11,117 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 2: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:11,117 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 2: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:11,117 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 2: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:11,117 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 2: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:11,117 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 2: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,128 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 3: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,128 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Failed after 3 retries
2024-12-18 02:39:21,128 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 3: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,128 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Failed after 3 retries
2024-12-18 02:39:21,128 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 3: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,128 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Failed after 3 retries
2024-12-18 02:39:21,128 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 3: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Failed after 3 retries
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 3: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Failed after 3 retries
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 3: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Failed after 3 retries
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 3: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Failed after 3 retries
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 3: name '_fetch_timeseries_data_async' is not defined
2024-12-18 02:39:21,129 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Failed after 3 retries
2024-12-18 02:39:21,130 [WARNING] [process_namespace] [Namespace: default] No valid dataframes retrieved. Marking as failed.
2024-12-18 02:39:22,130 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.71 MB
2024-12-18 02:39:22,131 [INFO] [process_namespace] [Namespace: default] Finished processing
2024-12-18 02:39:22,131 [INFO] [main] Processing completed: 0 successful, 1 failed.
2024-12-18 02:39:22,131 [WARNING] [main] Failed namespaces: ['default']
2024-12-18 02:39:23,132 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.71 MB
2024-12-18 02:39:23,133 [INFO] [<module>] Finished processing in 18.03 seconds
2024-12-18 02:39:56,211 [DEBUG] [__init__] Using selector: EpollSelector
2024-12-18 02:39:56,212 [INFO] [main] Processing metrics for date range: 2024-12-04 00:00:00 to 2024-12-17 00:00:00
2024-12-18 02:39:56,212 [INFO] [main] Found 1 namespaces to process
2024-12-18 02:39:56,212 [INFO] [process_namespace] [Namespace: default] Starting processing
2024-12-18 02:39:57,213 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.69 MB
2024-12-18 02:39:57,213 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time'.
2024-12-18 02:39:57,213 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:39:57,214 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:39:57,214 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:39:57,214 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:39:57,216 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:39:57,222 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:39:57,232 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:39:57,233 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:39:57,234 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:39:57,237 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:39:57,237 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:39:57,238 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:39:57,240 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:39:57,241 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:39:57,241 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:39:57,241 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_PERCENTILE_95', 'aggregation.perSeriesAligner': 'ALIGN_RATE', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/core_usage_time" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:39:57,242 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:39:57,243 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:39:58,272 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_PERCENTILE_95&aggregation.perSeriesAligner=ALIGN_RATE&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Fcore_usage_time%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:39:58,273 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:39:58,274 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'main', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.00215992385334987}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'loadgenerator', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'redis', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0018631692895004904}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'redis-cart', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0011593721652682376}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'adservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.003365090985857867}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0022247215689503662}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0029027570446529625}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.007699084797918204}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'emailservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.003570025026896611}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'frontend', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0009165558300170045}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0024310133258744265}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.005242702109863503}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0013459931366405528}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': 's{CPU}/s'}
2024-12-18 02:39:58,846 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:39:58,847 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:39:58,847 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:39:58,848 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:39:58,848 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores'.
2024-12-18 02:39:58,848 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:39:58,849 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:39:58,849 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:39:58,849 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:39:58,849 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:39:58,854 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:39:58,856 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:39:58,856 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:39:58,857 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:39:58,859 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:39:58,860 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:39:58,861 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:39:58,862 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:39:58,863 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:39:58,863 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:39:58,863 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/request_cores" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:39:58,864 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:39:58,865 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:39:59,352 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Frequest_cores%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:39:59,353 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:39:59,354 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'main', 'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.2999999999999715}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'container_name': 'redis', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.050000000000004985}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000002}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'adservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000001994}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009999999999999606}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015000000000000497}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'paymentservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009999999999999606}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': '{cpu}'}
2024-12-18 02:39:59,364 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:39:59,365 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:39:59,365 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:39:59,366 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:39:59,366 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores'.
2024-12-18 02:39:59,366 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:39:59,366 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:39:59,366 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:39:59,367 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:39:59,367 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:39:59,371 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:39:59,373 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:39:59,373 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:39:59,374 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:39:59,376 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:39:59,377 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:39:59,377 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:39:59,379 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:39:59,380 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:39:59,380 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:39:59,380 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/limit_cores" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:39:59,380 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:39:59,382 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:39:59,867 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Flimit_cores%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:39:59,868 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:39:59,869 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'main', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.5}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'redis', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.050000000000004985}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.2999999999999715}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'adservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.29999999999997157}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'cartservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.025000000000002492}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.030000000000000995}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'emailservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000001994}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'paymentservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.019999999999999213}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000002002}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': '{cpu}'}
2024-12-18 02:39:59,879 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:39:59,879 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:39:59,879 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:39:59,880 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:39:59,880 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes'.
2024-12-18 02:39:59,880 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:39:59,881 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:39:59,881 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:39:59,881 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:39:59,881 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:39:59,885 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:39:59,887 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:39:59,887 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:39:59,888 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:39:59,890 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:39:59,891 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:39:59,892 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:39:59,894 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:39:59,894 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:39:59,894 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:39:59,894 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MAX', 'aggregation.perSeriesAligner': 'ALIGN_MAX', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/used_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:39:59,895 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:39:59,896 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:00,994 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MAX&aggregation.perSeriesAligner=ALIGN_MAX&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Fused_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:00,995 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:00,995 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'main', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '136224768'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'redis'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '3633152'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'redis-cart', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'server', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '87302144'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '43155456'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '14307328'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '34885632'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '41750528'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'emailservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '15433728'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '34254848'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'paymentservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '12656640'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'productcatalogservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '41607168'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '10854400'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': 'By'}
2024-12-18 02:40:01,006 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:40:01,007 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:01,007 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:40:01,008 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:01,008 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes'.
2024-12-18 02:40:01,008 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:01,008 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:01,008 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:01,008 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:01,009 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:01,013 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:01,016 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:01,016 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:01,018 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:01,020 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:01,021 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:01,022 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:01,024 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:01,024 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:01,025 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:01,025 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/request_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:01,025 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:01,027 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:01,531 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Frequest_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:01,532 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:01,532 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'main', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 268435456}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'loadgenerator', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'redis', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 52428800}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 92274688}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 20971520}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 144703488}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'frontend', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'paymentservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 23068672}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': 'By'}
2024-12-18 02:40:01,542 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:40:01,542 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:01,543 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:40:01,543 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:01,544 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes'.
2024-12-18 02:40:01,544 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:01,544 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:01,544 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:01,544 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:01,544 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:01,548 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:01,550 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:01,551 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:01,552 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:01,554 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:01,555 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:01,555 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:01,557 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:01,558 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:01,558 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:01,558 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/limit_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:01,558 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:01,560 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:02,142 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Flimit_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:02,143 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:02,144 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'main', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 536870912}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'redis', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 52428800}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 161480704}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'server', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 41943040}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 524288000}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'emailservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'frontend', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 47185920}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'recommendationservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'shippingservice', 'top_level_controller_type': 'Deployment'}}}], 'unit': 'By'}
2024-12-18 02:40:02,154 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:40:02,154 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:02,154 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:40:02,155 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:02,155 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'.
2024-12-18 02:40:02,156 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:02,156 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:02,156 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:02,156 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:02,156 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:02,161 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:02,163 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:02,163 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:02,164 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:02,166 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:02,166 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:02,167 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:02,169 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:02,170 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:02,170 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:02,170 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MAX', 'aggregation.perSeriesAligner': 'ALIGN_MAX', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."namespace_name"', 'metric.label."container_name"', 'resource.label."controller_kind"', 'resource.label."controller_name"'], 'filter': 'metric.type="kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes" AND resource.type="k8s_scale" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:02,170 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:02,172 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:02,643 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MAX&aggregation.perSeriesAligner=ALIGN_MAX&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=metric.label.%22container_name%22&aggregation.groupByFields=resource.label.%22controller_kind%22&aggregation.groupByFields=resource.label.%22controller_name%22&filter=metric.type%3D%22kubernetes.io%2Fautoscaler%2Fcontainer%2Fmemory%2Fper_replica_recommended_request_bytes%22+AND+resource.type%3D%22k8s_scale%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:02,644 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:02,644 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'controller_name': 'adservice', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '109051904'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'controller_name': 'cartservice', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '60817408'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'controller_kind': 'Deployment', 'controller_name': 'checkoutservice'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '29360128'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default', 'controller_name': 'currencyservice', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '44040192'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'location': 'us-central1-f', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'controller_name': 'emailservice', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '61865984'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'controller_name': 'frontend', 'controller_kind': 'Deployment', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '18874368'}}]}, {'metric': {'labels': {'container_name': 'main'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'controller_name': 'loadgenerator', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '723517440'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'controller_name': 'paymentservice', 'controller_kind': 'Deployment', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '42991616'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment', 'controller_name': 'productcatalogservice', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '15728640'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'controller_name': 'recommendationservice', 'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '171966464'}}]}, {'metric': {'labels': {'container_name': 'redis'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'controller_name': 'redis-cart', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '5242880'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'controller_kind': 'Deployment', 'controller_name': 'shippingservice', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '14680064'}}]}], 'unit': 'By'}
2024-12-18 02:40:02,654 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:40:02,654 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:02,654 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:40:02,655 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:02,655 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'.
2024-12-18 02:40:02,655 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:02,655 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:02,656 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:02,656 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:02,656 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:02,661 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:02,662 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:02,663 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:02,664 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:02,665 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:02,666 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:02,667 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:02,669 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:02,669 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:02,670 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:02,670 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_PERCENTILE_95', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."namespace_name"', 'metric.label."container_name"', 'resource.label."controller_kind"', 'resource.label."controller_name"'], 'filter': 'metric.type="kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores" AND resource.type="k8s_scale" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:02,670 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:02,672 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:03,267 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_PERCENTILE_95&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=metric.label.%22container_name%22&aggregation.groupByFields=resource.label.%22controller_kind%22&aggregation.groupByFields=resource.label.%22controller_name%22&filter=metric.type%3D%22kubernetes.io%2Fautoscaler%2Fcontainer%2Fcpu%2Fper_replica_recommended_request_cores%22+AND+resource.type%3D%22k8s_scale%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:03,268 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:03,268 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment', 'controller_name': 'adservice'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.006447862309128949}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_name': 'cartservice', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.020420553912606863}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'controller_name': 'checkoutservice', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'controller_name': 'currencyservice', 'controller_kind': 'Deployment', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.019825780497676564}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'controller_name': 'emailservice'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.03580756489294343}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'controller_name': 'frontend', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.020420553912606863}}]}, {'metric': {'labels': {'container_name': 'main'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_name': 'loadgenerator', 'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'controller_name': 'paymentservice'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.005900707412856961}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'controller_kind': 'Deployment', 'controller_name': 'productcatalogservice', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'controller_name': 'recommendationservice', 'namespace_name': 'default', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.025114705574614763}}]}, {'metric': {'labels': {'container_name': 'redis'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'controller_name': 'redis-cart', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009193109884125744}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'controller_name': 'shippingservice'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.00793005734185575}}]}], 'unit': '{cpu}'}
2024-12-18 02:40:03,278 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:40:03,278 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:03,279 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:40:03,279 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:03,850 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time'.
2024-12-18 02:40:03,851 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:03,851 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:03,851 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:03,851 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:03,851 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:03,855 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:03,857 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:03,858 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:03,859 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:03,861 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:03,861 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:03,862 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:03,864 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:03,865 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:03,865 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:03,865 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_PERCENTILE_95', 'aggregation.perSeriesAligner': 'ALIGN_RATE', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/core_usage_time" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:03,865 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:03,867 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:05,035 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_PERCENTILE_95&aggregation.perSeriesAligner=ALIGN_RATE&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Fcore_usage_time%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:05,035 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:05,036 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'main', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.00215992385334987}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'redis', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0018631692895004904}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0011593721652682376}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.003365090985857867}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'container_name': 'server', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0022247215689503662}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'checkoutservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0029027570446529625}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'currencyservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.007699084797918204}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'emailservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.003570025026896611}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0009165558300170045}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0024310133258744265}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.005242702109863503}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0013459931366405528}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': 's{CPU}/s'}
2024-12-18 02:40:05,046 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:40:05,047 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:05,047 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:40:05,048 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:05,048 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores'.
2024-12-18 02:40:05,048 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:05,048 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:05,048 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:05,048 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:05,049 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:05,053 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:05,055 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:05,055 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:05,056 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:05,058 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:05,059 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:05,059 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:05,061 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:05,062 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:05,062 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:05,062 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/request_cores" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:05,062 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:05,064 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:05,457 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Frequest_cores%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:05,458 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:05,458 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'main'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.2999999999999715}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'loadgenerator', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'redis', 'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.050000000000004985}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'redis-cart', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000002}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000001994}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009999999999999606}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'currencyservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'server', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015000000000000497}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'frontend', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'paymentservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009999999999999606}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'recommendationservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'shippingservice', 'top_level_controller_type': 'Deployment'}}}], 'unit': '{cpu}'}
2024-12-18 02:40:05,468 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:40:05,468 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:05,469 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:40:05,469 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:05,470 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores'.
2024-12-18 02:40:05,470 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:05,470 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:05,470 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:05,470 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:05,470 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:05,475 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:05,477 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:05,477 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:05,478 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:05,480 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:05,480 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:05,481 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:05,483 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:05,483 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:05,484 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:05,484 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/limit_cores" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:05,484 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:05,486 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:05,867 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Flimit_cores%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:05,868 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:05,869 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'main', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.5}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'loadgenerator', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'redis', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.050000000000004985}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'redis-cart', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.2999999999999715}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.29999999999997157}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.025000000000002492}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'server', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.030000000000000995}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'emailservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000001994}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.019999999999999213}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000002002}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': '{cpu}'}
2024-12-18 02:40:05,879 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:40:05,879 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:05,880 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:40:05,880 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:06,008 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes'.
2024-12-18 02:40:06,008 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:06,010 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:06,010 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:06,010 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:06,010 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:06,015 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:06,017 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:06,017 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:06,018 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:06,020 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:06,021 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:06,022 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:06,024 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:06,025 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:06,025 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:06,025 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MAX', 'aggregation.perSeriesAligner': 'ALIGN_MAX', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/used_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:06,025 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:06,027 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:06,547 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MAX&aggregation.perSeriesAligner=ALIGN_MAX&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Fused_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:06,548 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:06,548 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'main', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '136224768'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'redis', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '3633152'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'redis-cart', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '87302144'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'adservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '43155456'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'cartservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '14307328'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'checkoutservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '34885632'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'currencyservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '41750528'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '15433728'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'frontend', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '34254848'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '12656640'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'productcatalogservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '41607168'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '10854400'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': 'By'}
2024-12-18 02:40:06,558 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:40:06,559 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:06,559 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:40:06,560 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:06,560 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes'.
2024-12-18 02:40:06,560 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:06,560 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:06,560 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:06,560 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:06,561 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:06,565 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:06,566 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:06,567 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:06,568 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:06,569 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:06,570 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:06,571 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:06,572 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:06,573 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:06,573 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:06,573 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/request_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:06,574 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:06,575 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:06,930 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Frequest_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:06,931 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:06,932 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'container_name': 'main', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 268435456}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'redis', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 52428800}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'redis-cart', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 92274688}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'adservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'server', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 20971520}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 144703488}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'frontend', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'productcatalogservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 23068672}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'shippingservice', 'top_level_controller_type': 'Deployment'}}}], 'unit': 'By'}
2024-12-18 02:40:06,943 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:40:06,943 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:06,943 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:40:06,944 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:07,156 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes'.
2024-12-18 02:40:07,157 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:07,157 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:07,157 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:07,157 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:07,157 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:07,162 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:07,164 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:07,164 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:07,165 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:07,167 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:07,168 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:07,169 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:07,171 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:07,171 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:07,172 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:07,172 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/limit_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:07,172 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:07,173 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:07,850 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Flimit_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:07,851 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:07,851 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'main'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 536870912}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'loadgenerator', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'redis'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 52428800}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 161480704}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 41943040}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 524288000}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'container_name': 'server', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'paymentservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'productcatalogservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 47185920}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': 'By'}
2024-12-18 02:40:07,861 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:40:07,861 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:07,861 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:40:07,862 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:07,862 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'.
2024-12-18 02:40:07,862 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:07,862 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:07,863 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:07,863 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:07,863 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:07,867 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:07,869 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:07,869 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:07,870 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:07,872 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:07,873 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:07,874 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:07,876 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:07,877 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:07,877 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:07,877 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MAX', 'aggregation.perSeriesAligner': 'ALIGN_MAX', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."namespace_name"', 'metric.label."container_name"', 'resource.label."controller_kind"', 'resource.label."controller_name"'], 'filter': 'metric.type="kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes" AND resource.type="k8s_scale" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:07,877 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:07,879 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:08,247 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MAX&aggregation.perSeriesAligner=ALIGN_MAX&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=metric.label.%22container_name%22&aggregation.groupByFields=resource.label.%22controller_kind%22&aggregation.groupByFields=resource.label.%22controller_name%22&filter=metric.type%3D%22kubernetes.io%2Fautoscaler%2Fcontainer%2Fmemory%2Fper_replica_recommended_request_bytes%22+AND+resource.type%3D%22k8s_scale%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:08,248 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:08,248 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'namespace_name': 'default', 'controller_name': 'adservice', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '109051904'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'controller_name': 'cartservice', 'location': 'us-central1-f', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '60817408'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'controller_name': 'checkoutservice', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '29360128'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'controller_kind': 'Deployment', 'controller_name': 'currencyservice', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '44040192'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_name': 'emailservice', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '61865984'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'controller_name': 'frontend'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '18874368'}}]}, {'metric': {'labels': {'container_name': 'main'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_name': 'loadgenerator', 'namespace_name': 'default', 'location': 'us-central1-f', 'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '723517440'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'controller_name': 'paymentservice', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '42991616'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'controller_kind': 'Deployment', 'controller_name': 'productcatalogservice', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '15728640'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'controller_name': 'recommendationservice', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'controller_kind': 'Deployment', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '171966464'}}]}, {'metric': {'labels': {'container_name': 'redis'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'controller_name': 'redis-cart'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '5242880'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'controller_name': 'shippingservice', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '14680064'}}]}], 'unit': 'By'}
2024-12-18 02:40:08,259 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:40:08,259 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:08,259 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:40:08,260 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:08,280 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'.
2024-12-18 02:40:08,281 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:08,281 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:08,281 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:08,281 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:08,281 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:08,285 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:08,287 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:08,287 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:08,288 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:08,290 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:08,291 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:08,291 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:08,293 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:08,294 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:08,294 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:08,294 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_PERCENTILE_95', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."namespace_name"', 'metric.label."container_name"', 'resource.label."controller_kind"', 'resource.label."controller_name"'], 'filter': 'metric.type="kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores" AND resource.type="k8s_scale" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:08,294 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:08,296 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:08,743 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_PERCENTILE_95&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=metric.label.%22container_name%22&aggregation.groupByFields=resource.label.%22controller_kind%22&aggregation.groupByFields=resource.label.%22controller_name%22&filter=metric.type%3D%22kubernetes.io%2Fautoscaler%2Fcontainer%2Fcpu%2Fper_replica_recommended_request_cores%22+AND+resource.type%3D%22k8s_scale%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:08,743 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:08,744 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'controller_kind': 'Deployment', 'controller_name': 'adservice', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.006447862309128949}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'controller_name': 'cartservice', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.020420553912606863}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'controller_name': 'checkoutservice', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_name': 'currencyservice', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.019825780497676564}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'controller_name': 'emailservice', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.03580756489294343}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'controller_name': 'frontend', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.020420553912606863}}]}, {'metric': {'labels': {'container_name': 'main'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'controller_name': 'loadgenerator', 'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'controller_name': 'paymentservice', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.005900707412856961}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'controller_name': 'productcatalogservice', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'controller_name': 'recommendationservice', 'location': 'us-central1-f', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.025114705574614763}}]}, {'metric': {'labels': {'container_name': 'redis'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'controller_kind': 'Deployment', 'controller_name': 'redis-cart'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009193109884125744}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'controller_kind': 'Deployment', 'controller_name': 'shippingservice'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.00793005734185575}}]}], 'unit': '{cpu}'}
2024-12-18 02:40:08,754 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:40:08,754 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:08,755 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:40:08,755 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:15,055 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time'.
2024-12-18 02:40:15,055 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:15,056 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:15,056 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:15,056 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:15,056 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:15,061 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:15,063 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:15,064 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:15,065 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:15,067 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:15,067 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:15,068 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:15,070 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:15,071 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:15,071 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:15,071 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_PERCENTILE_95', 'aggregation.perSeriesAligner': 'ALIGN_RATE', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/core_usage_time" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:15,071 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:15,073 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:16,185 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_PERCENTILE_95&aggregation.perSeriesAligner=ALIGN_RATE&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Fcore_usage_time%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:16,186 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:16,187 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'main', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.00215992385334987}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'container_name': 'redis', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0018631692895004904}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0011593721652682376}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.003365090985857867}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'cartservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0022247215689503662}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'checkoutservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0029027570446529625}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.007699084797918204}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.003570025026896611}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0009165558300170045}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'paymentservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0024310133258744265}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.005242702109863503}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'recommendationservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/core_usage_time'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.0013459931366405528}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'shippingservice', 'top_level_controller_type': 'Deployment'}}}], 'unit': 's{CPU}/s'}
2024-12-18 02:40:16,197 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:40:16,197 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:16,197 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:40:16,198 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:16,198 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Failed after 3 retries
2024-12-18 02:40:16,198 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores'.
2024-12-18 02:40:16,199 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:16,199 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:16,199 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:16,199 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:16,199 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:16,204 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:16,205 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:16,206 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:16,207 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:16,209 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:16,210 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:16,211 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:16,213 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:16,213 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:16,213 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:16,214 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/request_cores" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:16,214 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:16,215 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:16,767 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Frequest_cores%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:16,768 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:16,768 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'main', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.2999999999999715}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'redis', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.050000000000004985}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000002}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'adservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000001994}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009999999999999606}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'currencyservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015000000000000497}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'frontend', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'paymentservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'productcatalogservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009999999999999606}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/request_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'shippingservice', 'top_level_controller_type': 'Deployment'}}}], 'unit': '{cpu}'}
2024-12-18 02:40:16,778 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:40:16,779 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:16,779 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:40:16,779 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:16,780 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Failed after 3 retries
2024-12-18 02:40:16,780 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores'.
2024-12-18 02:40:16,780 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:16,780 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:16,780 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:16,780 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:16,781 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:16,785 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:16,786 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:16,787 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:16,788 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:16,790 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:16,790 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:16,791 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:16,793 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:16,793 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:16,793 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:16,794 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/cpu/limit_cores" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:16,794 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:16,795 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:17,274 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fcpu%2Flimit_cores%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:17,274 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:17,275 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'container_name': 'main', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.5}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'redis'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.050000000000004985}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'redis-cart', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.2999999999999715}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'adservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.29999999999997157}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.025000000000002492}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.030000000000000995}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'container_name': 'server', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000001994}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000001001}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.10000000000000997}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'productcatalogservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'container_name': 'server', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.019999999999999213}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/cpu/limit_cores'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.20000000000002002}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': '{cpu}'}
2024-12-18 02:40:17,285 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:40:17,286 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:17,286 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:40:17,287 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:17,287 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Failed after 3 retries
2024-12-18 02:40:17,287 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes'.
2024-12-18 02:40:17,287 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:17,287 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:17,287 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:17,287 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:17,288 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:17,292 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:17,294 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:17,294 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:17,295 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:17,297 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:17,297 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:17,298 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:17,300 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:17,300 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:17,301 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:17,301 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MAX', 'aggregation.perSeriesAligner': 'ALIGN_MAX', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/used_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:17,301 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:17,302 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:18,505 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MAX&aggregation.perSeriesAligner=ALIGN_MAX&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Fused_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:18,506 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:18,506 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'container_name': 'main', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '136224768'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'redis'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '3633152'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '87302144'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '43155456'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'cartservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '14307328'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '34885632'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'currencyservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '41750528'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '15433728'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '34254848'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '12656640'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'productcatalogservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '41607168'}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/used_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '10854400'}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'shippingservice', 'top_level_controller_type': 'Deployment'}}}], 'unit': 'By'}
2024-12-18 02:40:18,516 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:40:18,517 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:18,517 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:40:18,518 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:18,518 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Failed after 3 retries
2024-12-18 02:40:18,518 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes'.
2024-12-18 02:40:18,518 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:18,518 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:18,518 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:18,518 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:18,519 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:18,523 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:18,525 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:18,525 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:18,526 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:18,528 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:18,529 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:18,530 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:18,531 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:18,532 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:18,532 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:18,532 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/request_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:18,532 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:18,534 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:19,048 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Frequest_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:19,048 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:19,049 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'main', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 268435456}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'container_name': 'redis', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 52428800}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'redis-cart'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 92274688}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'adservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'location': 'us-central1-f', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'cartservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 20971520}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'checkoutservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'currencyservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 144703488}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'frontend'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'container_name': 'server', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'productcatalogservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'server', 'project_id': 'gke-rightsize', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 23068672}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/request_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'container_name': 'server', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': 'By'}
2024-12-18 02:40:19,059 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:40:19,059 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:19,060 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:40:19,060 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:19,061 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Failed after 3 retries
2024-12-18 02:40:19,061 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes'.
2024-12-18 02:40:19,061 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:19,061 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:19,061 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:19,061 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:19,062 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:19,066 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:19,067 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:19,068 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:19,069 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:19,070 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:19,071 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:19,072 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:19,074 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:19,074 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:19,074 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:19,075 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MEAN', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."controller_name"', 'resource.label."namespace_name"', 'resource.label."container_name"', 'metadata.system_labels."top_level_controller_name"', 'metadata.system_labels."top_level_controller_type"'], 'filter': 'metric.type="kubernetes.io/container/memory/limit_bytes" AND resource.type="k8s_container" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:19,075 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:19,076 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:20,007 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MEAN&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22controller_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=resource.label.%22container_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_name%22&aggregation.groupByFields=metadata.system_labels.%22top_level_controller_type%22&filter=metric.type%3D%22kubernetes.io%2Fcontainer%2Fmemory%2Flimit_bytes%22+AND+resource.type%3D%22k8s_container%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:20,008 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:20,009 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'main'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 536870912}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'loadgenerator'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'container_name': 'redis'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 52428800}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'redis-cart', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'container_name': 'server', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 161480704}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'adservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'container_name': 'server', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'cartservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 41943040}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'checkoutservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'currencyservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'project_id': 'gke-rightsize', 'container_name': 'server', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 524288000}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'emailservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'frontend', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'container_name': 'server', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_name': 'paymentservice', 'top_level_controller_type': 'Deployment'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 67108864}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'productcatalogservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'container_name': 'server', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 47185920}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'recommendationservice'}}}, {'metric': {'type': 'kubernetes.io/container/memory/limit_bytes'}, 'resource': {'type': 'k8s_container', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'container_name': 'server'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 134217728}}], 'metadata': {'systemLabels': {'top_level_controller_type': 'Deployment', 'top_level_controller_name': 'shippingservice'}}}], 'unit': 'By'}
2024-12-18 02:40:20,019 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:40:20,019 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:20,019 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:40:20,020 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:20,020 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Failed after 3 retries
2024-12-18 02:40:20,020 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'.
2024-12-18 02:40:20,021 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:20,021 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:20,021 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:20,021 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:20,021 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:20,025 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:20,027 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:20,027 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:20,028 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:20,030 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:20,031 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:20,032 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:20,033 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:20,034 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:20,034 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:20,034 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_MAX', 'aggregation.perSeriesAligner': 'ALIGN_MAX', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."namespace_name"', 'metric.label."container_name"', 'resource.label."controller_kind"', 'resource.label."controller_name"'], 'filter': 'metric.type="kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes" AND resource.type="k8s_scale" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:20,034 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:20,036 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:20,556 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_MAX&aggregation.perSeriesAligner=ALIGN_MAX&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=metric.label.%22container_name%22&aggregation.groupByFields=resource.label.%22controller_kind%22&aggregation.groupByFields=resource.label.%22controller_name%22&filter=metric.type%3D%22kubernetes.io%2Fautoscaler%2Fcontainer%2Fmemory%2Fper_replica_recommended_request_bytes%22+AND+resource.type%3D%22k8s_scale%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:20,557 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:20,557 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'controller_name': 'adservice', 'cluster_name': 'online-boutique', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '109051904'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'controller_name': 'cartservice', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '60817408'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_name': 'checkoutservice', 'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '29360128'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'controller_name': 'currencyservice', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '44040192'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment', 'controller_name': 'emailservice'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '61865984'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'controller_name': 'frontend'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '18874368'}}]}, {'metric': {'labels': {'container_name': 'main'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'controller_name': 'loadgenerator', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '723517440'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_name': 'paymentservice', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'namespace_name': 'default', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '42991616'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'controller_name': 'productcatalogservice', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '15728640'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'controller_name': 'recommendationservice'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '171966464'}}]}, {'metric': {'labels': {'container_name': 'redis'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'controller_name': 'redis-cart', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '5242880'}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'controller_name': 'shippingservice', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'INT64', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'int64Value': '14680064'}}]}], 'unit': 'By'}
2024-12-18 02:40:20,567 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:40:20,568 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:20,568 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:40:20,568 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:20,569 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Failed after 3 retries
2024-12-18 02:40:20,569 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'.
2024-12-18 02:40:20,569 [DEBUG] [_fetch_timeseries_data] Query date range: 2024-12-04 00:00:00 - 2024-12-17 00:00:00
2024-12-18 02:40:20,569 [DEBUG] [_get_explicit_environ_credentials] Checking None for explicit credentials as part of auth process...
2024-12-18 02:40:20,569 [DEBUG] [_get_gcloud_sdk_credentials] Checking Cloud SDK credentials as part of auth process...
2024-12-18 02:40:20,569 [DEBUG] [_get_gcloud_sdk_credentials] Cloud SDK credentials not found on disk; not using them
2024-12-18 02:40:20,570 [DEBUG] [__call__] Making request: GET http://169.254.169.254
2024-12-18 02:40:20,574 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/project/project-id
2024-12-18 02:40:20,576 [DEBUG] [_fetch_timeseries_data] Refreshing Google Cloud credentials.
2024-12-18 02:40:20,576 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/?recursive=true
2024-12-18 02:40:20,577 [DEBUG] [_new_conn] Starting new HTTP connection (1): metadata.google.internal:80
2024-12-18 02:40:20,579 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/default/?recursive=true HTTP/10" 200 None
2024-12-18 02:40:20,579 [DEBUG] [__call__] Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token
2024-12-18 02:40:20,580 [DEBUG] [_get_conn] Resetting dropped connection: metadata.google.internal
2024-12-18 02:40:20,582 [DEBUG] [_make_request] http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/admin@ameenahb.altostrat.com/token HTTP/10" 200 None
2024-12-18 02:40:20,582 [DEBUG] [_fetch_timeseries_data] Formatted UTC start: 2024-12-04T00:00:00+00:00, end: 2024-12-17T00:00:00+00:00
2024-12-18 02:40:20,583 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:40:20,583 [DEBUG] [_fetch_timeseries_data] Initial query parameters: {'aggregation.alignmentPeriod': '1209600s', 'aggregation.crossSeriesReducer': 'REDUCE_PERCENTILE_95', 'aggregation.perSeriesAligner': 'ALIGN_MEAN', 'aggregation.groupByFields': ['resource.label."location"', 'resource.label."project_id"', 'resource.label."cluster_name"', 'resource.label."namespace_name"', 'metric.label."container_name"', 'resource.label."controller_kind"', 'resource.label."controller_name"'], 'filter': 'metric.type="kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores" AND resource.type="k8s_scale" AND resource.labels.namespace_name="default"', 'interval.startTime': '2024-12-04T00:00:00+00:00', 'interval.endTime': '2024-12-17T00:00:00+00:00', 'view': 'FULL'}
2024-12-18 02:40:20,583 [DEBUG] [_fetch_timeseries_data] Sending request to Monitoring API.
2024-12-18 02:40:20,584 [DEBUG] [_new_conn] Starting new HTTPS connection (1): monitoring.googleapis.com:443
2024-12-18 02:40:21,051 [DEBUG] [_make_request] https://monitoring.googleapis.com:443 "GET /v3/projects/gke-rightsize/timeSeries?aggregation.alignmentPeriod=1209600s&aggregation.crossSeriesReducer=REDUCE_PERCENTILE_95&aggregation.perSeriesAligner=ALIGN_MEAN&aggregation.groupByFields=resource.label.%22location%22&aggregation.groupByFields=resource.label.%22project_id%22&aggregation.groupByFields=resource.label.%22cluster_name%22&aggregation.groupByFields=resource.label.%22namespace_name%22&aggregation.groupByFields=metric.label.%22container_name%22&aggregation.groupByFields=resource.label.%22controller_kind%22&aggregation.groupByFields=resource.label.%22controller_name%22&filter=metric.type%3D%22kubernetes.io%2Fautoscaler%2Fcontainer%2Fcpu%2Fper_replica_recommended_request_cores%22+AND+resource.type%3D%22k8s_scale%22+AND+resource.labels.namespace_name%3D%22default%22&interval.startTime=2024-12-04T00%3A00%3A00%2B00%3A00&interval.endTime=2024-12-17T00%3A00%3A00%2B00%3A00&view=FULL HTTP/11" 200 None
2024-12-18 02:40:21,052 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:40:21,052 [DEBUG] [_fetch_timeseries_data] Received response: {'timeSeries': [{'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'controller_name': 'adservice', 'controller_kind': 'Deployment', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.006447862309128949}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'location': 'us-central1-f', 'namespace_name': 'default', 'controller_kind': 'Deployment', 'controller_name': 'cartservice', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.020420553912606863}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'project_id': 'gke-rightsize', 'controller_name': 'checkoutservice', 'namespace_name': 'default', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'controller_name': 'currencyservice', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'namespace_name': 'default', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.019825780497676564}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'controller_name': 'emailservice', 'location': 'us-central1-f', 'namespace_name': 'default'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.03580756489294343}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'namespace_name': 'default', 'controller_name': 'frontend', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.020420553912606863}}]}, {'metric': {'labels': {'container_name': 'main'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_name': 'loadgenerator', 'controller_kind': 'Deployment', 'namespace_name': 'default', 'location': 'us-central1-f', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'project_id': 'gke-rightsize', 'location': 'us-central1-f', 'controller_name': 'paymentservice', 'namespace_name': 'default', 'cluster_name': 'online-boutique'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.005900707412856961}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'cluster_name': 'online-boutique', 'controller_name': 'productcatalogservice', 'namespace_name': 'default', 'project_id': 'gke-rightsize', 'controller_kind': 'Deployment', 'location': 'us-central1-f'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.015194809905191278}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'location': 'us-central1-f', 'controller_name': 'recommendationservice', 'project_id': 'gke-rightsize', 'cluster_name': 'online-boutique', 'controller_kind': 'Deployment'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.025114705574614763}}]}, {'metric': {'labels': {'container_name': 'redis'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'controller_kind': 'Deployment', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'project_id': 'gke-rightsize', 'namespace_name': 'default', 'controller_name': 'redis-cart'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.009193109884125744}}]}, {'metric': {'labels': {'container_name': 'server'}, 'type': 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'}, 'resource': {'type': 'k8s_scale', 'labels': {'namespace_name': 'default', 'controller_kind': 'Deployment', 'location': 'us-central1-f', 'cluster_name': 'online-boutique', 'controller_name': 'shippingservice', 'project_id': 'gke-rightsize'}}, 'metricKind': 'GAUGE', 'valueType': 'DOUBLE', 'points': [{'interval': {'startTime': '2024-12-17T00:00:00Z', 'endTime': '2024-12-17T00:00:00Z'}, 'value': {'doubleValue': 0.00793005734185575}}]}], 'unit': '{cpu}'}
2024-12-18 02:40:21,064 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:40:21,064 [DEBUG] [_fetch_timeseries_data] No next page token. Ending data fetch loop.
2024-12-18 02:40:21,065 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:40:21,065 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:40:21,066 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Failed after 3 retries
2024-12-18 02:40:21,066 [WARNING] [process_namespace] [Namespace: default] No valid dataframes retrieved. Marking as failed.
2024-12-18 02:40:22,066 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 133.46 MB
2024-12-18 02:40:22,067 [INFO] [process_namespace] [Namespace: default] Finished processing
2024-12-18 02:40:22,068 [INFO] [main] Processing completed: 0 successful, 1 failed.
2024-12-18 02:40:22,069 [WARNING] [main] Failed namespaces: ['default']
2024-12-18 02:40:23,069 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 133.46 MB
2024-12-18 02:40:23,070 [INFO] [<module>] Finished processing in 26.86 seconds
2024-12-18 02:43:57,249 [INFO] [main] Processing metrics for date range: 2024-12-04 00:00:00 to 2024-12-17 00:00:00
2024-12-18 02:43:57,249 [INFO] [main] Found 1 namespaces to process
2024-12-18 02:43:57,249 [INFO] [process_namespace] [Namespace: default] Starting processing
2024-12-18 02:43:58,250 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 129.94 MB
2024-12-18 02:43:58,250 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time'.
2024-12-18 02:43:58,275 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:43:59,226 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:43:59,240 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:43:59,240 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:43:59,241 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:43:59,241 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores'.
2024-12-18 02:43:59,252 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:43:59,760 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:43:59,770 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:43:59,771 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:43:59,771 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:43:59,771 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores'.
2024-12-18 02:43:59,783 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:00,281 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:00,292 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:44:00,293 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:44:00,293 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:00,294 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes'.
2024-12-18 02:44:00,305 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:01,306 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:01,317 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:44:01,318 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:44:01,318 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:01,318 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes'.
2024-12-18 02:44:01,330 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:01,913 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:01,923 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:44:01,923 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:44:01,924 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:01,924 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes'.
2024-12-18 02:44:01,936 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:02,442 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:02,453 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:44:02,453 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:44:02,454 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:02,454 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'.
2024-12-18 02:44:02,465 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:02,944 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:02,954 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:44:02,954 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:44:02,955 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:02,955 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'.
2024-12-18 02:44:02,966 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:03,440 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:03,451 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:44:03,451 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:44:03,452 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 1: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:04,243 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time'.
2024-12-18 02:44:04,254 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:05,620 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:05,631 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:44:05,631 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:44:05,632 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:05,632 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores'.
2024-12-18 02:44:05,644 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:06,024 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:06,035 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:44:06,035 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:44:06,036 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:06,036 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores'.
2024-12-18 02:44:06,047 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:06,456 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:06,466 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:44:06,467 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:44:06,467 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:06,468 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes'.
2024-12-18 02:44:06,479 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:06,893 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:06,903 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:44:06,903 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:44:06,904 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:06,924 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes'.
2024-12-18 02:44:06,936 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:07,313 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:07,324 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:44:07,325 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:44:07,326 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:07,454 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes'.
2024-12-18 02:44:07,466 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:07,875 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:07,885 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:44:07,885 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:44:07,886 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:07,955 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'.
2024-12-18 02:44:07,967 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:08,329 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:08,340 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:44:08,340 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:44:08,341 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:08,453 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'.
2024-12-18 02:44:08,464 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:08,836 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:08,846 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:44:08,847 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:44:08,847 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 2: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:15,636 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time'.
2024-12-18 02:44:15,647 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:17,014 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:17,025 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:44:17,025 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:44:17,026 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:17,026 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_usage] Failed after 3 retries
2024-12-18 02:44:17,026 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores'.
2024-12-18 02:44:17,037 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:17,795 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:17,805 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:44:17,806 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:44:17,806 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:17,806 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_requested_cores] Failed after 3 retries
2024-12-18 02:44:17,807 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores'.
2024-12-18 02:44:17,818 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:18,303 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:18,313 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:44:18,314 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:44:18,314 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:18,314 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: cpu_limit_cores] Failed after 3 retries
2024-12-18 02:44:18,315 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes'.
2024-12-18 02:44:18,325 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:19,388 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:19,400 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:44:19,401 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:44:19,402 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:19,402 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_usage] Failed after 3 retries
2024-12-18 02:44:19,402 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes'.
2024-12-18 02:44:19,413 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:19,909 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:19,919 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:44:19,920 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:44:19,920 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:19,920 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_requested_bytes] Failed after 3 retries
2024-12-18 02:44:19,921 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes'.
2024-12-18 02:44:19,932 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:20,414 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:20,424 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:44:20,425 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:44:20,425 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:20,425 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: memory_limit_bytes] Failed after 3 retries
2024-12-18 02:44:20,426 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'.
2024-12-18 02:44:20,436 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:20,921 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:20,930 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:44:20,931 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:44:20,931 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:20,931 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_memory_recommendation] Failed after 3 retries
2024-12-18 02:44:20,932 [INFO] [_fetch_timeseries_data] Starting data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'.
2024-12-18 02:44:20,943 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:44:21,413 [INFO] [_fetch_timeseries_data] API call successful.
2024-12-18 02:44:21,423 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:44:21,424 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:44:21,424 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Error on attempt 3: object DataFrame can't be used in 'await' expression
2024-12-18 02:44:21,424 [ERROR] [fetch_metric_with_retries] [Namespace: default, Metric: vpa_cpu_recommendation] Failed after 3 retries
2024-12-18 02:44:21,425 [WARNING] [process_namespace] [Namespace: default] No valid dataframes retrieved. Marking as failed.
2024-12-18 02:44:22,426 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 133.56 MB
2024-12-18 02:44:22,426 [INFO] [process_namespace] [Namespace: default] Finished processing
2024-12-18 02:44:22,426 [INFO] [main] Processing completed: 0 successful, 1 failed.
2024-12-18 02:44:22,426 [WARNING] [main] Failed namespaces: ['default']
2024-12-18 02:44:23,427 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 133.56 MB
2024-12-18 02:44:23,428 [INFO] [<module>] Finished processing in 26.18 seconds
2024-12-18 02:46:50,393 [INFO] [main] Processing metrics for date range: 2024-12-04 00:00:00 to 2024-12-17 00:00:00
2024-12-18 02:46:50,393 [INFO] [main] Found 1 namespaces to process
2024-12-18 02:46:50,394 [INFO] [process_namespace] [Namespace: default] Starting processing
2024-12-18 02:46:51,394 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 135.60 MB
2024-12-18 02:46:51,395 [INFO] [_fetch_timeseries_data] Starting async data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time'.
2024-12-18 02:46:51,418 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:46:51,420 [INFO] [_fetch_timeseries_data] Starting async data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores'.
2024-12-18 02:46:51,432 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:46:51,432 [INFO] [_fetch_timeseries_data] Starting async data fetch for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores'.
2024-12-18 02:46:51,444 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:46:51,444 [INFO] [_fetch_timeseries_data] Starting async data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes'.
2024-12-18 02:46:51,455 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:46:51,456 [INFO] [_fetch_timeseries_data] Starting async data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes'.
2024-12-18 02:46:51,468 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:46:51,468 [INFO] [_fetch_timeseries_data] Starting async data fetch for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes'.
2024-12-18 02:46:51,480 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:46:51,480 [INFO] [_fetch_timeseries_data] Starting async data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes'.
2024-12-18 02:46:51,492 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:46:51,492 [INFO] [_fetch_timeseries_data] Starting async data fetch for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores'.
2024-12-18 02:46:51,503 [INFO] [_fetch_timeseries_data] Fetching data from URL: https://monitoring.googleapis.com/v3/projects/gke-rightsize/timeSeries
2024-12-18 02:46:52,018 [INFO] [_fetch_timeseries_data] Async API call successful.
2024-12-18 02:46:52,031 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:46:52,032 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/memory/per_replica_recommended_request_bytes' contains 12 rows.
2024-12-18 02:46:52,033 [INFO] [_fetch_timeseries_data] Async API call successful.
2024-12-18 02:46:52,043 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:46:52,044 [INFO] [_fetch_timeseries_data] Async API call successful.
2024-12-18 02:46:52,053 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:46:52,054 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/autoscaler/container/cpu/per_replica_recommended_request_cores' contains 12 rows.
2024-12-18 02:46:52,055 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/request_cores' contains 12 rows.
2024-12-18 02:46:52,056 [INFO] [_fetch_timeseries_data] Async API call successful.
2024-12-18 02:46:52,065 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:46:52,067 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/request_bytes' contains 12 rows.
2024-12-18 02:46:52,072 [INFO] [_fetch_timeseries_data] Async API call successful.
2024-12-18 02:46:52,083 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:46:52,084 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/limit_bytes' contains 12 rows.
2024-12-18 02:46:52,658 [INFO] [_fetch_timeseries_data] Async API call successful.
2024-12-18 02:46:52,669 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:46:52,670 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/memory/used_bytes' contains 12 rows.
2024-12-18 02:46:52,725 [INFO] [_fetch_timeseries_data] Async API call successful.
2024-12-18 02:46:52,736 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:46:52,737 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/core_usage_time' contains 12 rows.
2024-12-18 02:46:53,159 [INFO] [_fetch_timeseries_data] Async API call successful.
2024-12-18 02:46:53,168 [INFO] [_fetch_timeseries_data] Processed data for metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:46:53,169 [INFO] [_fetch_timeseries_data] Final DataFrame for namespace 'default' and metric 'kubernetes.io/container/cpu/limit_cores' contains 12 rows.
2024-12-18 02:46:53,303 [INFO] [process_namespace] [Namespace: default] Merging dataframes
2024-12-18 02:46:53,391 [INFO] [process_namespace] [Namespace: default] Building VPA recommendations
2024-12-18 02:46:53,391 [INFO] [process_namespace] [Namespace: default] Writing recommendations to BigQuery
2024-12-18 02:46:53,391 [INFO] [process_namespace] [Namespace: default] Successfully processed
2024-12-18 02:46:54,392 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 142.08 MB
2024-12-18 02:46:54,392 [INFO] [process_namespace] [Namespace: default] Finished processing
2024-12-18 02:46:54,393 [INFO] [main] Processing completed: 1 successful, 0 failed.
2024-12-18 02:46:55,394 [INFO] [log_resource_usage] Resource Usage: CPU = 0.00%, Memory = 142.08 MB
2024-12-18 02:46:55,396 [INFO] [<module>] Finished processing in 5.00 seconds
